[buildout]
develop = . gbewiki gbeguestbook gbe99bottles gbepastebin
parts = eggbasket app data zopectl i18n test zodb server instance2
newest = false
extends = http://grok.zope.org/releaseinfo/grok-0.14.1.cfg
# eggs will be installed in the default buildout location
# (see .buildout/default.cfg in your home directory)
# unless you specify an eggs-directory option here.

versions = versions

[app]
recipe = zc.zope3recipes>=0.5.3:application
eggs = gbedemosite
site.zcml = <include package="gbedemosite" />
            <include package="zope.app.twisted" />

            <configure i18n_domain="gbedemosite">
              <unauthenticatedPrincipal id="zope.anybody"
                                        title="Unauthenticated User" />
              <unauthenticatedGroup id="zope.Anybody"
                                    title="Unauthenticated Users" />
              <authenticatedGroup id="zope.Authenticated"
                                title="Authenticated Users" />
              <everybodyGroup id="zope.Everybody"
                              title="All Users" />
              <principal id="zope.manager"
                         title="Manager"
                         login="grok"
                         password_manager="Plain Text"
                         password="grok"
                         />

              <!-- Replace the following directive if you do not want
                   public access -->
              <grant permission="zope.View"
                     principal="zope.Anybody" />
              <grant permission="zope.app.dublincore.view"
                     principal="zope.Anybody" />

              <role id="zope.Manager" title="Site Manager" />
              <role id="zope.Member" title="Site Member" />
              <grantAll role="zope.Manager" />
              <grant role="zope.Manager"
                     principal="zope.manager" />
           </configure>

[data]
recipe = zc.recipe.filestorage

[zodb]
recipe = zc.recipe.egg:script
eggs = ZODB3

[server]
recipe = zc.zodbrecipes:server
zeo.conf =
   <zeo>
      address 8100
   </zeo>
   <filestorage 1>
      path ${buildout:parts-directory}/data/ZEOData.fs
   </filestorage>

# this section named so that the start/stop script is called bin/zopectl
[zopectl]
recipe = zc.zope3recipes:instance
application = app
zope.conf = devmode on
    <zodb>
      <zeoclient>
        server 8100
      </zeoclient>
    </zodb>
    site-definition ${buildout:parts-directory}/app/site.zcml
    
    <accesslog>
      <logfile>
        path ${buildout:parts-directory}/zopectl/access.log
      </logfile>
    </accesslog>
    
    <eventlog>
      <logfile>
        formatter zope.exceptions.log.Formatter
        path STDOUT
      </logfile>
    </eventlog>
address = 8080

[instance2]
recipe = zc.zope3recipes:instance
extends = zopectl
address = 9080

[test]
recipe = zc.recipe.testrunner
eggs = gbedemosite
defaults = ['--tests-pattern', '^f?tests$', '-v']

# this section named so that the i18n scripts are called bin/i18n...
[i18n]
recipe = lovely.recipe:i18n
package = gbedemosite
domain = gbedemosite
location = src/gbedemosite
output = locales

[eggbasket]
recipe = z3c.recipe.eggbasket
eggs = grok
url = http://grok.zope.org/releaseinfo/grok-eggs-0.14.1.tgz
