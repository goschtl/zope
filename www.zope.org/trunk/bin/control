#!/bin/sh

set -e

myself="$0"
case "$myself" in
    (/*)
        mydir="$(dirname $myself)"
        ;;

    (*)
        mydir="$(dirname $(pwd)/$myself)"
        ;;
esac

buildout="$(dirname $mydir)"

case "$1" in
    start)
        echo Starting buildout in $(dirname $buildout)
        $mydir/zeo start
        $mydir/instance start
        ;;

    stop)
        echo Stopping buildout in $(dirname $buildout)
        $mydir/instance stop
        $mydir/zeo stop
        ;;

    restart)
        $0 stop
        $0 start
        ;;

    *)
        echo "Usage: $0 (start|stop|restart)" >&2
        exit 1
        ;;
esac

exit 0
