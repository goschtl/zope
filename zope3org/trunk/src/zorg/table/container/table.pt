<div tal:define="sortBy view/table/config/sortBy;
                    sortReverse view/table/config/sortReverse;
                    batchStart view/table/config/batchStart;
                    prefix view/table/config/prefix;
                    page view/table/config/page;
                    pages view/table/config/pages;
                    reReverse python:not sortReverse">
  <input type="hidden" tal:attributes="name string:${prefix}sortBy;
                                       id string:${prefix}sortBy;
                                       value sortBy"/>
  <input type="hidden" tal:attributes="name string:${prefix}sortReverse;
                                       id string:${prefix}sortReverse;
                                       value sortReverse"/>
  <input type="hidden" tal:attributes="name string:${prefix}batchStart;
                                       id string:${prefix}batchStart;
                                       value batchStart"/>

<div class="form-status"
   tal:define="status view/getStatus"
   tal:condition="status">

  <div class="summary"
       i18n:translate=""
       tal:content="view/getStatus">
    Form status summary
  </div>

  <ul class="errors" tal:condition="view/getErrors">
     <li tal:repeat="error view/getErrors">
        <span tal:replace="structure error">Error Type</span>
     </li>
  </ul>
</div>

<div tal:condition="view/getPages">
  <span>Page:&nbsp;&nbsp;</span>
  <metal:block tal:repeat="page view/getPages">
    <a href=""
        tal:attributes="href string:javascript:document.getElementById('${prefix}batchStart').value='${page/batchStart}';; document.getElementById('${prefix}batchStart').form.submit();;;"
        tal:content="page/page"
        tal:condition="python: not page['batchStart'] == batchStart" />
    <span tal:content="page/page"
          tal:condition="python: page['batchStart'] == batchStart" />
    &nbsp;&nbsp;
  </metal:block>
</div>

<table id="sortable" class="listing">
  <thead>
  <th>&nbsp;</th>
  <th tal:repeat="col view/table/getColumns">
   <a tal:condition="python:col.name!=sortBy"
      tal:attributes="href string:javascript:document.getElementById('${prefix}sortBy').value='${col/name}';; document.getElementById('${prefix}sortBy').form.submit();;;">
   <span class="selected" tal:content="col/title"/>
   </a>
   <a tal:condition="python:col.name==sortBy"
      tal:attributes="href string:javascript:document.getElementById('${prefix}sortReverse').value='${reReverse}';; document.getElementById('${prefix}sortReverse').form.submit();;;">
   <span class="selected" tal:content="col/title"/>
   <img tal:condition="sortReverse"
        tal:attributes="src context/++resource++table_sort_up.gif" />
   <img tal:condition="reReverse"
        tal:attributes="src context/++resource++table_sort_down.gif" />
   </a>
  </th>
  <th>&nbsp;</th>
  </thead>
  <tbody>
   
   <metal:block tal:repeat="row view/getRows">
    <tr tal:define="oddrow repeat/row/odd"
        tal:attributes="class python:oddrow and 'even' or 'odd'"
        tal:content="structure row">
    </tr>
   </metal:block>
  </tbody>  
</table>

<div tal:condition="view/getPages">
  <span>Page:&nbsp;&nbsp;</span>
  <metal:block tal:repeat="page view/getPages">
    <a href=""
        tal:attributes="href string:javascript:document.getElementById('${prefix}batchStart').value='${page/batchStart}';; document.getElementById('${prefix}batchStart').form.submit();;;"
        tal:content="page/page"
        tal:condition="python: not page['batchStart'] == batchStart" />
    <span tal:content="page/page"
          tal:condition="python: page['batchStart'] == batchStart" />
    &nbsp;&nbsp;
  </metal:block>
  <br /><br />
</div>

 <metal:block tal:repeat="action view/getActions">
   <input tal:replace="structure action" /> 
 </metal:block>
        
</div>
