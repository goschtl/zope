Code blocks
===========

`Sphinx <http://sphinx.pocoo.org/>`_ and other docutils `extensions
<http://docutils.sourceforge.net/sandbox/code-block-directive/docs/syntax-highlight.html>`_
provide a `"code-block" directive <http://sphinx.pocoo.org/markup/code.html>`_
allows inlined snippets of code in `reST
<http://docutils.sourceforge.net/rst.html>`_ documents.

For example a block of Python would be prefixed with ".. code-block:: python"::

    .. code-block:: python

        print 'hello'

The manuel.codeblock module provides the ability to execute the contents of
Python code-blocks.

    >>> import manuel.codeblock
    >>> m = manuel.codeblock.Manuel()

Let's create a reST document with a code block.

    >>> document = manuel.Document("""
    ... Here is a code-block:
    ...
    ... .. code-block:: python
    ...
    ...     x = 'hello'
    ...
    ... A little prose to separate the examples.
    ...
    ...     >>> print x
    ...     hello
    ...     
    ... """)

Since the above document mixes code-blocks and doctests, we'll mix in the
doctest handler.

    >>> import manuel.doctest
    >>> m.extend(manuel.doctest.Manuel())
    >>> document.process_with(m, globs={})
    >>> print document.formatted()
