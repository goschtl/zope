<html metal:use-macro="context/@@macros/gaia-page">
  <div metal:fill-slot="content">

    <h1>Edit Roles and Permissions</h1>

    <div tal:condition="view/msg">
      <span class="emph" tal:content="view/msg">Message</span>
    </div>

    <div>

      <fieldset>
	<legend>Roles and Permissions:</legend>
	
	<form method="post">
	  <input type="hidden"
		 tal:repeat="role view/roles"
		 tal:attributes="name string:role${role};
				 value role" />
	  <input type="hidden"
		 tal:repeat="perm view/permissions"
		 tal:attributes="name string:perm${perm/id};
				 value perm/id" />
	  <fieldset class="menu-box2">
	    <table>
	      <tr>
		<th />
		<th tal:repeat="role view/roles"
		    tal:content="role">role</th>
	      </tr>
	      <tr tal:repeat="perm view/permissions">
		<td tal:content="perm/id">perm.id</td>
		<td tal:repeat="role view/roles" align="center">
		  <select name="prole"
			  tal:attributes="name string:prole${perm/id}${role}">
		    <option tal:repeat="setting view/settingnames"
			    tal:attributes="selected python:setting==view.proles[perm.id][role]"
			    tal:content="setting" />
		  </select>
		</td>
	      </tr>
	    </table>
	    <input type="submit" name="set_proles" value="Save" />
	  </fieldset>
	</form>
      </fieldset>

    </div>

  </div>
</html>
