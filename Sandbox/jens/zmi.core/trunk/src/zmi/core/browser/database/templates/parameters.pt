<html>
<title>Cache Parameters</title>

<body>

<nav>
  <ul>
    <li><a href="./zodb_overview.html">Overview</a></li>
    <li><a href="./zodb_activity.html">Activity</li>
    <li><a href="./zodb_parameters.html">Cache Parameters</li>
    <li><a href="./zodb_flush.html">Flush Cache</li>
  </ul>
</nav>

<h1>Cache Parameters</h1>

<dl>
  <dt>Total number of objects in the database</dt>
  <dd tal:content="view/database_size">Database Size</dd>
  <dt>Total number of objects in memory from all caches</dt>
  <dd tal:content="view/cache_length">Cache Length</dd>
  <dt>Target memory size per cache in bytes</dt>
  <dd tal:content="view/cache_length_bytes">Cache Size in Bytes</dd>

</dl>

<h2>Total number of objects in each cache:</h2>

<table>
  <tr>
      <th>Cache Name</th>
      <th>Number of active objects</th>
      <th>Total active and non-active objects</th>
  </tr>

<!--<dtml-in cache_detail_length mapping>-->

  <tr tal:repeat="mapping view/cache_detail_length">
      <td tal:content="mapping/connection">&dtml-connection;</td>
      <td tal:content="mapping/ngsize">&dtml-ngsize;</td>
      <td tal:content="mapping/size">&dtml-size;</td>
  </tr>

  <tr class="row-hilite">
      <td>Total</td>
      <td tal:content="view/cache_length"></td>
      <td></td>
  </tr>

</table>

<a href="?show_cache_detail=True">Show detail</a>

<div tal:condition="exists:request/show_cache_detail">
  <h2>Cache Details</h2>

  <table>
    <tr>
      <th>Object Class</th>
      <th>Count</th>
    </tr>
      <tr tal:repeat="object view/cache_detail">
      <td tal:content="object/key">Key name</td>
      <td tal:content="object/value">Value</td>
    </tr>
  </table>

</div>

<a href="?show_cache_detail=True">Show detail</a>
<div tal:condition="exists:request/show_cache_extreme_detail">
  <h2>Objects in the cache</h2>

  <table>
    <tr>
      <th>Object ID</th>
      <th>Object Class</th>
      <th>Reference Count</th>
      <th>References</th>
    </tr>
      <tr tal:repeat="object cache_extreme_detail">
      <td tal:content="object/oid">OID</td>
      <td tal:content="object/klass">Object Class</td>
      <td tal:content="object/rc">Reference Count</td>
      <td tal:content="object/references">References</td></tr>
  </table>

</div>


</body>
</html>