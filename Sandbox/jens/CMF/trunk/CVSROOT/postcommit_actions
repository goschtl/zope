#!/bin/env python

"""Dispatch checkin notifications and manage symlinks, after checkins happen.

Meant to be used on 'loginfo' CVS bookkeeping hook, eg:

  DEFAULT ${CVSROOT}/CVSROOT/postcommit_actions %{sVv}

Notifications are routed according to traffic_table.py in the bookkeeping
directory, and symlink management is according to checkin of a file named
'repolinks'.  The actual work happens in a separate, disconnected process to
avoid CVS lock self-contention and also avoid delaying people's checkin
activities.

See RepoUtils.postcommit and .adjustlinks for more details (generally
installed in the python site-packages directory)."""

from RepoUtils.postcommit import cvs_postcommit 
import sys

cvs_postcommit(sys.argv,
               cvsmaster="cvs-admin@zope.org",
               ldap_host="10.0.24.10",
               ldap_search_base="ou=people,dc=zope,dc=org",
               ldap_filter_list_template="cn=%s")
