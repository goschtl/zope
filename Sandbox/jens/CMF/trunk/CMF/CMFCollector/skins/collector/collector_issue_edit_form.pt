<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master">
<body>

<span tal:replace="nothing">
  Template description: Basic view of issue characteristics and transcript.
</span>

<div metal:fill-slot="header">

  <div metal:use-macro="here/collector_macros/macros/issue_header">

    ISSUE HEADER

  </div>

</div>

<div metal:fill-slot="main">

  <div tal:condition="not: collector_issue_header_present|nothing">
    <span tal:condition="nothing"> When master has no macro "header"... </span>
    <div metal:use-macro="here/collector_macros/macros/issue_header">
      ISSUE HEADER
    </div>
  </div>

  <h3> Edit Collector Issue <span tal:replace="here/id"></span> </h3>

  <p>
    Adjust various issue data - the current settings are indicated above.  Use
    the regular issue followup, instead, to change the issue workflow state or
    assigned supporters, and use the folder contents view to change the
    uploads.
  </p>

  <form method="POST" enctype="multipart/form-data"
        action="collector_issue_edit">

    <div metal:use-macro="here/collector_macros/macros/issue_header">

      <span tal:condition="nothing">
        This table will be replaced by the issue header structure, with the
        various value slots being replaced by the input fields below.
      </span>

      <table>
        <tr>
          <td> ISSUE TITLE </td>
          <td metal:fill-slot="issue_title_slot" colspan="3">
            <input name="title" value="TITLE" size="TITLESIZE"
                   tal:attributes="value python: here.Title();
                                   size TITLELEN">
          </td>
        </tr>

        <tr>
          <td align="right"> Security Related: </td>
          <td metal:fill-slot="issue_security_slot"> related?
            <input type="checkbox" name="security_related:int" value="1"
                   tal:attributes="checked here/security_related">
          </td>
        </tr>

        <tr>
          <td> ISSUE DESCRIPTION </td>
          <td metal:fill-slot="issue_description_slot" colspan="3">
            <textarea name="description:text" rows="4" cols="60"
                      tal:content="here/description">
</textarea>
          </td>
        </tr>

        <tr>
          <td> Topic </td>
          <td>
            <span metal:fill-slot="issue_topic_slot">
              <select name="topic">
                <option value=""
                        tal:repeat="it here/aq_parent/topics"
                        tal:attributes="value it;
                                        selected python: here.topic == it"
                        tal:content="python: it.capitalize()">
                </option>
              </select>
            </span>
          </td>
        </tr>

        <tr>
          <td> Classification </td>
          <td>
            <span metal:fill-slot="issue_classification_slot">
              <select name="classification">
                <option value=""
                        tal:repeat="it here/aq_parent/classifications"
                        tal:attributes="value it;
                                        selected python: here.classification
                                                         == it"
                        tal:content="python: it.capitalize()">
                </option>
              </select>
            </span>
          </td>
        </tr>

        <tr>
          <td> Importance </td>
          <td metal:fill-slot="issue_importance_slot">
            <select name="importance">
              <option value=""
                      tal:repeat="it here/aq_parent/importances"
                      tal:attributes="value it;
                                      selected python: here.importance == it"
                      tal:content="python: it.capitalize()">
              </option>
            </select>
          </td>
        </tr>

        <tr>
          <td> Severity </td>
          <td metal:fill-slot="issue_severity_slot">
            <select name="severity">
              <option value=""
                      tal:repeat="it here/aq_parent/severities"
                      tal:attributes="value it;
                                      selected python: here.severity == it"
                      tal:content="python: it.capitalize()">
              </option>
            </select>
          </td>
        </tr>

        <tr>
          <td> Version </td>
          <td metal:fill-slot="issue_version_slot">
            <select name="reported_version">
              <option value=""
                      tal:repeat="it here/aq_parent/versions"
                      tal:attributes="value it;
                                      selected python: here.reported_version
                                                       == it"
                      tal:content="python: it.capitalize()">
              </option>
            </select>
          </td>
        </tr>

        <tr>
          <td> Other versions </td>
          <td rowspan="2" colspan="2"
              metal:fill-slot="issue_other_versions_slot">
            <textarea name="other_version_info" rows="2" cols="30"
                      tal:content="here/other_version_info">
</textarea>

          </td>
        </tr>

        <tr>
          <td> Upload </td>
          <td metal:fill-slot="issue_uploads_slot" colspan="3">
            <font color="gray">
              Use the issue folder_contents view, if accessible, to change the
              uploads.
            </font>
          </td>
        </tr>
      </table>

    </div>

    <table>
      <tr>
        <th> Transcript </th>
      </tr>
      <tr tal:define="transcript here/get_transcript">
        <td>
          <textarea name="text" rows="10" cols="75" wrap="soft"
                    tal:content="transcript/text">
</textarea>
        </td>
      </tr>

      <tr>
        <td>
            <input type="submit" name="submit" value="Submit">
            <input type="reset" name="reset" value="Reset">
        </td>
      </tr>
    </table>

  </form>

</div>

</body>
</html>
