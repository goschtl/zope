<!-- Invoke this macro with "items" in the namespace. -->

<table>
<tbody metal:define-macro="tbody"
       tal:define="my_url python: request['URL'] + '?';
                   mq python: modules['ZTUtils'].make_query">
      <tr>
        <th width="1%"> </th>
        <th nowrap width="5%"></th>
        <th tal:repeat="column python: ['Title', 'Type', 'CreationDate']"
            tal:attributes="width python:
                            column == 'Title' and '50%' or default">
          <a href="" tal:omit-tag="python: sort_attr == column"
             tal:attributes="href python: my_url + 
             mq(request.form, sort_attr=column, sort_order='normal')"
             tal:content="column">Title</a>
          <a href="" tal:condition="python: sort_attr == column"
             tal:attributes="href python: my_url + mq(request.form,
             sort_attr=column, sort_order=(sort_order == 'normal'
             and 'reverse' or 'normal'))"><img border="0"
             src="sorted_down.gif" tal:attributes="src
             python: '%s/%s' % (here.portal_url(), sort_order == 'normal'
             and 'sorted_down.gif' or 'sorted_up.gif')" /></a>
        </th>
      </tr>

      <tr tal:repeat="it items">
<tal:block define="item python:it[1]">
        <td><img tal:define="status_image item/get_status_image | nothing"
               tal:condition="status_image"
               tal:replace="structure status_image"
               tal:on-error="string:broken" /></td>

        <td> <input type="checkbox" name="selected_items:list"
                    tal:attributes="value python: it[0]"/>
        </td>

        <td> <img src="document_icon.gif"
                  tal:attributes="src item/getIcon"
                  tal:on-error="string:" />
            <a href="#"
               tal:attributes="href string:${item/absolute_url}/view"
               tal:content="item/Title"
               tal:omit-tag="no_item_links|nothing"
               tal:on-error="string:(broken)">
              TITLE or ID </a>
        </td>

        <td tal:content="item/Type"
            tal:on-error="string:(unknown)">
          Type
        </td>

        <td tal:content="item/CreationDate"
            tal:on-error="string:(unknown)">
          CreationDate
        </td>

</tal:block>
      </tr>
</tbody>
</table>
