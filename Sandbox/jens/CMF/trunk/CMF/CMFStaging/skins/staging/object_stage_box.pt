<div class="box" metal:define-macro="staging"
  tal:condition="python:
  hasattr(here, 'portal_staging') and here.portal_staging.isStageable(here)">
<div class="module">
 <a tal:attributes="href string:${here/absolute_url}/object_stage_form">
  Staging
 </a>
</div>

<table class="box-body">
<tr tal:repeat="stats python: here.portal_staging.getObjectStats(here)">

<td>
<div tal:condition="stats/stageable">
 <form action="object_stage_form" method="POST">
 <input type="hidden" name="stage_name" tal:attributes="value stats/name" />
 <input type="submit" value="&gt;&gt;" name="submit" />
 </form>
</div>
</td>

<td>
 <a href="#" tal:omit-tag="not:stats/exists"
   tal:attributes="href string:object_preview_stage?stage_name=${stats/name}"
   tal:content="stats/title">Development</a>
</td>

<td>
 <div tal:condition="stats/exists">
 Rev. <span tal:replace="stats/revision">1+</span>
 </div>
</td>

</tr>
</table>
</div>
