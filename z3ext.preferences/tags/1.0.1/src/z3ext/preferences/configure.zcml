<configure
   xmlns="http://namespaces.zope.org/zope"
   xmlns:z3ext="http://namespaces.zope.org/z3ext"
   i18n_domain="z3ext">

  <autoinclude package="z3ext.preferences" />

  <role
     id="preference.Owner"
     title="Preference group owner" />

  <permission
     id="z3ext.ModifyPreference"
     title="Modifye preference" />

  <grant
     permission="z3ext.ModifyPreference"
     role="preference.Owner" />

  <!-- root preference group -->
  <utility
     provides=".interfaces.IPreferenceGroup"
     factory=".root.PersonalPreferences" />

  <class class=".root.PersonalPreferences">
    <require
       permission="zope.Public"
       interface=".interfaces.IPreferenceGroup
                  zope.interface.common.mapping.IEnumerableMapping" />
  </class>

  <class class=".preference.PreferenceGroup">
    <implements interface="zope.annotation.interfaces.IAttributeAnnotatable" />
  </class>

  <!-- preference group publisher -->
  <adapter
     for=".interfaces.IPreferenceGroup *"
     factory="z3c.traverser.traverser.PluggableTraverser"
     provides="zope.publisher.interfaces.IPublishTraverse" />

  <subscriber
     for=".interfaces.IPreferenceGroup *"
     provides="z3c.traverser.interfaces.ITraverserPlugin"
     factory=".publisher.PreferenceTraverserPlugin" />

  <!-- predefined preference group -->
  <z3ext:preferenceGroup
     id="portal"
     title="Portal preferences"
     description="These are all the preferences related to common portal settings."
     provides="z3ext.preferences.interfaces.IPreferenceCategory" />

  <include package=".browser" />

</configure>
