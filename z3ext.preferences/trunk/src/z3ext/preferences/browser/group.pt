<form action="." metal:define-macro="master" i18n:domain="z3ext"
      tal:attributes="action request/URL" method="post"
      tal:omit-tag="view/subform"
      class="edit-form" enctype="multipart/form-data">

  <tal:block tal:content="structure view/form_result" />
  
  <tal:block tal:condition="view/editable">
    <tal:block repeat="group view/subgroups">
      <div tal:condition="nocall:group/view"
	   tal:content="structure python:group['view'].render(True)"></div>
      <br />
    </tal:block>
  </tal:block>

  <div class="topframe" tal:condition="not:view/editable">
    <tal:block repeat="group view/subgroups">
      <div tal:condition="nocall:group/view"
	   tal:content="structure group/view/render"></div>
      <br />
    </tal:block>
  </div>

  <div class="formControls"
       tal:condition="python:view.editable and not view.subform">
    <hr />
    <span class="actionButtons">
      <input type="submit" 
	     id="form-buttons-save" name="form.buttons.save"
	     class="z-form-savebutton button-field" value="Save"
	     i18n:attributes="value" />
    </span>
  </div>
</form>
