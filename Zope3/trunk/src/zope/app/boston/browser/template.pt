<metal:block define-macro="page"><metal:block define-slot="doctype"><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"></metal:block>

<html xmlns="http://www.w3.org/1999/xhtml" 
      xml:lang="en" lang="en" 
      i18n:domain="zope">
<head>
  <title metal:define-slot="title"
         tal:content="string:Zope 3: ${context/zope:title_or_name}">
    Zope 3: title
  </title>
  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <!-- move this javascript to a pagelet -->
  <script type="text/javascript" src="boston.js"
          tal:attributes="src string:${context/++resource++boston.js}">
    <!-- Using a separate end tag instead of a single empty tag is
         necessary to support some browsers (Firefox 1.0, for example).
         -->
  </script>

  <style type="text/css" media="all" 
         tal:content="string: @import url(${context/++resource++skin.css});">
    @import url(skin.css);
  </style>

  <!-- move this styles sheet to a pagelet -->
  <style type="text/css" media="all" 
         tal:content="string: @import url(${context/++resource++widget.css});">
    @import url(widget.css);
  </style>
        
  <link rel="icon" type="image/png" 
        tal:attributes="href context/++resource++favicon.png" />

  <!-- some slots used in Zope3 Rotterdam, let's be compatible -->
  <metal:block define-slot="headers" />
  <metal:block define-slot="style_slot" />
  <metal:block define-slot="ecmascript_slot" />  

  <!-- head pagelets -->
  <metal:block tal:repeat="pagelets pagelets:zope.app.boston.slots.IHead">
    <tal:block metal:use-macro="pagelets" />
  </metal:block>
        
  <!-- css slot -->
  <metal:block tal:repeat="pagelets pagelets:zope.app.boston.slots.ICSS">
    <tal:block metal:use-macro="pagelets" />
  </metal:block>
        
  <!-- javascripts slot -->
  <metal:block tal:repeat="pagelets pagelets:zope.app.boston.slots.IJavaScript">
    <tal:block metal:use-macro="pagelets" />
  </metal:block>
</head>

<body tal:define="global rooturl request/getApplicationURL;
                  global thisbaseurl request/URL/-1">

  <table id="layout">
    <tr class="menu">
      <td colspan="2">

        <!-- toolbar slot (zmi_action) -->
        <tal:block repeat="pagelets pagelets:zope.app.boston.slots.IToolBar">
          <metal:block use-macro="pagelets" />
        </tal:block>

        <div id="userdetails">
          <metal:block define-macro="logged_user">
            <span tal:omit-tag="" i18n:translate="">User:</span>
            <tal:block replace="request/principal/title">User</tal:block>
          </metal:block>
          <a href="" 
             tal:attributes="href string:@@logout.html?nextURL=${request/URL}"
             tal:condition="python: hasattr(view.request.principal, 'getLogin')"
             i18n:translate="">[Logout]</a>
          <a href="" 
             tal:attributes="href string:@@login.html?nextURL=${request/URL}"
             tal:condition="python: not hasattr(view.request.principal, 
                                                'getLogin')"
             i18n:translate="">[Login]</a>
        </div>
      </td>
    </tr>
    <tr class="head">
      <td class="logo">
        <img width="107" height="38"
             tal:attributes="src context/++resource++logo.gif" />
      </td>
      <td>
        <div id="breadcrumbs" metal:define-macro="breadcrumbs">
          <span tal:omit-tag="" i18n:translate="">Location:&nbsp;</span>
          <tal:block repeat="breadcrumb context/@@absolute_url/breadcrumbs">
            <a href=""
               tal:condition="repeat/breadcrumb/start"
               tal:attributes="href 
                    string:${breadcrumb/url}/@@SelectedManagementView.html"
               i18n:translate="">[top]</a>
            <a href=""
               tal:condition="not:repeat/breadcrumb/start"
               tal:content="string:${breadcrumb/name}"
               tal:attributes="href 
                    string:${breadcrumb/url}/@@SelectedManagementView.html"
               >breadcrumb item</a>
            / 
          </tal:block>
        </div>
      </td>
    </tr>
    <tr>
      <td id="navigation">
        <div id="slotbox">
          <tal:block repeat="pagelet pagelets:zope.app.boston.slots.ILeft">
            <metal:block use-macro="pagelet" />
          </tal:block>
        </div>
      </td>
      <td id="content">
        <div id="zmiviews">
          <div metal:define-slot="tabs" 
               tal:condition="python:macroname == 'view'">
            <span tal:repeat="view context/@@view_get_menu/zmi_views">
              <a href="" 
                 tal:attributes="href view/action;
                                 class view/selected;"
                 tal:content="view/title"
                 i18n:translate="">label</a>
            </span>
          </div> 
        </div> 
        <div metal:define-slot="message" id="message" />
        <div id="body" metal:define-slot="body">
          <table class="listing">
            <thead>
              <th>Test</th>
              <th>Another</th>
            </thead>
            <tbody>
              <tr>
                <td>content</td>
                <td>thingy</td>
              </tr>
              <tr class="even">
                <td>more</td>
                <td>data</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div id="footer" metal:define-macro="footer" />
        <div id="logger" />
      </td>
    </tr>
  </table>

</body>
</html>
</metal:block>
