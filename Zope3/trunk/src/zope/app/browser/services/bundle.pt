<html metal:use-macro="views/standard_macros/page">

<div metal:fill-slot="body" tal:define="message view/update">

<h1>Bundle Information</h1>

<h4>Services needed by this bundle</h4>

<ul>
  <li tal:repeat="svc view/listServices">
    <i tal:content="svc/service">Foo</i> service:
    <span tal:condition="svc/insite">
      present in site at
      <a tal:content="svc/path" tal:attributes="href svc/path">/path</a>
    </span>
    <span tal:condition="not:svc/insite">
      <span tal:condition="svc/inbundle">
        configured in bundle at
        <a tal:content="svc/inbundle"
           tal:attributes="href svc/inbundle">path</a>
      </span>
      <span tal:condition="not:svc/inbundle">
        <font size="+1" color="red">
          <b>UNFULFILLED DEPENDENCY</b>
        </font>
        <br><b>(You must <a href="../default/AddService">add a
        <i tal:content="svc/service">Foo</i>
        service to this site</a> before you can activate this bundle)</b>
      </span>
    </span>
  </li>
</ul>

<h4>Configurations in this bundle</h4>

  <div class="message" tal:condition="message">
    <span tal:replace="message">view/update message here</span>
    <br><br><i><a href="@@bundle.html">(click to clear message)</a></i>
  </div>

<form action="@@bundle.html" method="GET">

  <tal:block tal:repeat="svc view/listServices">

    <p>For <i tal:content="svc/service">Foo</i> service</p>

    <ul>
      <tal:block tal:repeat="cnf view/listConfigurations">
        <li tal:condition="python: cnf['service'] == svc['service']">
          <a tal:content="cnf/path" tal:attributes="href cnf/path">path</a>
          (current status: <span tal:replace="cnf/status">Active</span>)
          <br>
          <i tal:content="cnf/usage">Usage summary</i>
          implemented by
          <i tal:content="cnf/implementation">Implementation summary</i>
          <br>
          <span tal:condition="not:cnf/conflict">
            Action:
            <b><input type="radio" tal:attributes="name cnf/path"
                   value="Registered" />Register only</b>
            <b><input type="radio" tal:attributes="name cnf/path"
                   value="Active" checked />Register and activate</b>
	  </span>
          <span tal:condition="cnf/conflict">
            <font color="red">
              Conflicts with <a tal:content="cnf/conflict"
                                 tal:attributes="href cnf/conflict">path</a>
            </font>
            <br>Action:
            <b><input type="radio" tal:attributes="name cnf/path"
                   value="Registered" checked />Register only</b>
            <b><input type="radio" tal:attributes="name cnf/path"
                   value="Active" />Register and activate</b>
          </span>
        </li>
      </tal:block>
    </ul>

  </tal:block>

  <p>Click "Activate bundle" to perform the above actions.</p>

  <p><input type="submit" value="Activate bundle" /></p>

  <p><input type="reset" value="Reset form" /></p>

</form>

<form action="@@bundle.html" method="GET">

  <p>Click "Deactivate bundle" to unregister all configurations in
  this bundle.</p>

  <p><input type="submit" value="Deactivate bundle" /></p>

  <input type="hidden" name="allclear" value="1" />

</form>

</div>

</html>
