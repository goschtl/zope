<metal:block define-macro="page">
  <metal:block define-slot="doctype">
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  </metal:block>

<html xmlns="http://www.w3.org/1999/xhtml"
    xml:lang="en"
    lang="en">

  <head>
    <title metal:define-slot="title">Z3 UI</title>


    <style type="text/css"
           media="all"
           tal:content=
               "string: @import url(${context/++resource++zope3.css});"
           >
      @import url(zope3.css);
    </style>

    <meta http-equiv="Content-Type"
          content="text/html;charset=utf-8" />

    <metal:block define-slot="headers" />
    <metal:block define-slot="style_slot" />
    <metal:block define-slot="ecmascript_slot" />

    <!-- Ugly is better than lobotomized.
    -->
    <script type="text/javascript" src="xmltree.js"
            tal:attributes="src string:${context/++resource++xmltree.js}" >
    </script>

    <link rel="icon" type="image/png"
          tal:attributes="href context/++resource++favicon.png" />
  </head>

  <body onload="loadtree('');"
      tal:define="rooturl     request/getApplicationURL;
                  thisbaseurl request/URL/-1;"
      tal:attributes="
          onload string:loadtree('${rooturl}/', '${thisbaseurl}/');">

    <div id="global">
      <div id="userDetails">
        <metal:block define-macro="logged_user">
          User:
	  <tal:block replace="request/user/getTitle">
            User
          </tal:block>
        </metal:block>
        <span tal:content="string:Usage $usage" />
      </div>
      <img tal:attributes="src context/++resource++zope3logo.gif" />
    </div>

    <div id="navigators">

    <!-- Ugly is better than lobotomized.
    -->
      <div class="box" id="navigationTree">
        <h4>Navigation</h4>
        <div
            xmlns="http://www.zope.org/zope3xmltree"
            id="navtreecontents"
            class="body"
            onclick="treeclicked(event);"
            >Loading...
        </div>
      </div>

      <div class="box" id="commonTasks"
           tal:define="view context/@@commonTasks|nothing"
           tal:condition="view/strip|nothing">

        <h4>Common Tasks</h4>
        <div class="body">
          <span tal:replace="structure view" />
        </div>
      </div>

    </div>


    <div id="workspace">

      <div id="breadcrumbs"
	   metal:define-macro="breadcrumbs"
       > Location:&nbsp;<tal:block
	   repeat="breadcrumb context/@@absolute_url/breadcrumbs"
	  ><a href=""
	      tal:condition="repeat/breadcrumb/start"
	      tal:content="string:[top]"
	      tal:attributes="
	      href string:${breadcrumb/url}/@@SelectedManagementView.html"
	      >XXX should not hardcode root folder name string</a
	     ><a href=""
		 tal:condition="not:repeat/breadcrumb/start"
		 tal:content="string:${breadcrumb/name}"
		 tal:attributes="
		 href string:${breadcrumb/url}/@@SelectedManagementView.html"
		  >breadcrumb item</a> / </tal:block>
      </div>

      <div class="itemViews"
           metal:define-slot="tabs">
        <tal:block repeat="view context/@@view_get_menu/zmi_views">
          <a href=""
            tal:attributes="href view/action;
                            class view/selected;"
            tal:content="view/title">
            label
          </a>
        </tal:block>
      </div>

      <div id="actions"
          tal:define="actions context/@@view_get_menu/zmi_actions"
          tal:condition="actions"
          metal:define-slot="tabs">
          <a href="#"
               tal:attributes="href info/action"
               tal:repeat="info actions"
               tal:content="info/title">
              Action name
          </a>&nbsp;
      </div>

      <div id="viewspace">

        <div metal:define-slot="message" id="message">
        </div>

        <div id="content">
          <metal:block define-slot="body">
            <table class="listing">
              <thead>
                <th>Test</th>
                <th>Another</th>
              </thead>
              <tbody>
              	<tr>
              	  <td>content</td>
              	  <td>thingy</td>
              	</tr>
              	<tr class="even">
              	  <td>more</td>
              	  <td>data</td>
              	</tr>
              </tbody>
            </table>
          </metal:block>
        </div>


        <div id="context_information">

          <div id="helpers">

            <div class="box" id="itemHelp" tal:condition="pagetip|nothing">
              <h4>Tip</h4>
              <div class="body">
                <div class="content odd">
                  <metal:block define-slot="pagetip"
                               tal:replace="pagetip">
                    A short tip goes here
                  </metal:block>
                </div>
              </div>
            </div>

            <div class="box" id="help"
                tal:define="results view/@@find_help_topics|nothing"
                tal:condition="results">
              <h4>Online Help</h4>
              <div class="body">
                <a href="#"
                    tal:repeat="entry results"
                            tal:attributes="href entry/url">
                  <div tal:define="oddrow repeat/entry/odd"
                      tal:attributes="class python:oddrow and 'even' or 'odd'"
                      tal:content="entry/topic/title">Topic Title
                  </div>
                </a>
              </div>
            </div>

            <div class="spacer">
              &nbsp;
            </div>

      	  </div>

<!--
          <div id="inspectors">

            <div class="box" id="metadata"
                tal:define="view context/@@MetaDataBox|nothing"
                tal:condition="view/strip|nothing">

              <h4>Metadata</h4>

              <div class="body">

                <div class="content" tal:content="structure view">
                  Some metadata
                </div>

              </div>
            </div>
          </div>
-->

        </div>

        <div class="spacer">
	  &nbsp;
        </div>

      </div>
    </div>

    <div id="footer" metal:define-macro="footer" />

    <div id="logger" />

  </body>

</html>

</metal:block>

