===================
Mechanize Bug Fixes
===================

This file contains bug fixes to the mechanize framework that have not yet been
reported to mechanize authors.

``mechanize``
-------------

- The ``Browser.close()`` method fails to close the current response using
  ``Browser._response.close()``. If you are opening a lot of pages, then you
  will end up witha "too many files opnened" error eventually.

- The ``update_history`` argument of ``Browser._mech_open()`` was unused.

- In the ``Browser.close()`` method, the ``Browser._history`` attribute is set
  to ``None``, but is should be ``[]`` (an empty list).

- Related to the entry above, when the history is reset, none of the stored
  responses is closed.

- Due to the poor design of the history implementation, you can still get "too
  many files opened" if you use the rest of the ``Browser`` API. The ideal
  solution would be to close the previous response just before you use
  ``Browser._mech_open()``. In fact this method should be responsible of the
  cleanup.

- URLs that are retrieved using pullparser might be unclean, meaning they
  might contain leading and trailing whitespace. The ``Link`` class should
  thus strip the base and link url.
