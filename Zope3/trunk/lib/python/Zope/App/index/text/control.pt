<html>

  <body>

    <h1>TextIndex</h1>

    <span tal:condition="request/callSubscribe|nothing" tal:omit-tag="">
        <span tal:define="dummy context/subscribe" tal:omit-tag=""/>
    </span>
    <span tal:condition="request/callUnsubscribe|nothing" tal:omit-tag="">
        <span tal:define="dummy context/unsubscribe" tal:omit-tag=""/>
    </span>

    <div>
    	Documents: <span tal:replace="context/documentCount" />
    </div>

    <div>
    	Words: <span tal:replace="context/wordCount" />
    </div>

    <form method="POST">
       <span tal:condition="context/isSubscribed" tal:omit-tag="">
           Subscription state: ON
           <input type="submit" value="Unsubscribe" name="callUnsubscribe" />
       </span>
       <span tal:condition="not:context/isSubscribed" tal:omit-tag="">
           Subscription state: OFF
           <input type="submit" value="Subscribe" name="callSubscribe" />
       </span>
    </form>

    <form method="GET">
        <input type="text" name="queryText" value=""
               tal:attributes="value request/queryText|nothing" />
        <input type="submit" value="Query" name="callQuery" />
    </form>

    <div tal:condition="request/queryText|nothing" tal:omit-tag="">
        Search results:
        <span tal:replace="python:context.query(request['queryText'])[1]" />
    </div>

  </body>

</html>
