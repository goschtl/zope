from zope.interface import Interface, implements
from persistent import Persistent
from zope.schema.fieldproperty import FieldProperty

# field imports
from zope.schema import Text
from zope.app.schemagen import schemaspec

class IFoo(Interface):
    """Autogenerated schema."""
    alpha = Text(title=u'alpha')

class FooClass(Persistent):
    """Autogenerated class for IFoo."""
    implements(IFoo)

    def __init__(self):
        self.__schema_version__ = 1

    alpha = FieldProperty(IFoo['alpha'])

    def __setstate__(self, state):
        transformations = schemaspec.prepareSetstate(self, state, 1)
        if transformations is None:
            return
        dict = self.__dict__
        if 0 in transformations:
            schemaspec.AddField.update(dict, state, 'alpha')
