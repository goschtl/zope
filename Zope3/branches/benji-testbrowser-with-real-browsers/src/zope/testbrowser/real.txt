===================
Using Real Browsers
===================

Using the zope.testbrowser.real module, real browsers can be controlled via
the testbrowser API.  First, instantiate a Browser object.

    >>> from zope.testbrowser.real import Browser
    >>> browser = Browser()

We can open pages and look at their contents.

    >>> browser.open('http://localhost/')
    >>> browser.contents
    u'...</head>...'

    >>> browser.contents
    u'...[top]...'

    >>> browser.getLink('[top]', index=0)
    <Link text='[top]' url=u'http://localhost:23123/@@SelectedManagementView.html'>

If a link doesn't exist, we get an exception.

    >>> browser.getLink('does not exist')
    Traceback (most recent call last):
    ...
    LookupError: text 'does not exist'

Links can be clicked.

    >>> browser.getLink('[top]', index=0).click()

We can retrieve the current address.

    >>> browser.url
    u'http://localhost:23123/'

Reload works.

    >>> original_contents = browser.contents
    >>> browser.reload()
    >>> original_contents == browser.contents
    True


goBack doesn't work. XXX

    >>> browser.getLink('[top]', index=0).click()
    >>> browser.goBack()
    >>> import time; time.sleep(1) # XXX race condition
    >>> original_contents == browser.contents
    False

When we're done with the browser we have to close it.

    >>> browser.close()
