<!-- topmenu macro, render first level items with class name 'topmenu' -->
<metal:block define-macro="topmenu">
	<a href="#" class="topmenu"
		 tal:content="menuitem/title"
		 i18n:translate="">
	</a>
	<metal:block use-macro="python:view.macros('menugroup')" />
</metal:block>

<!-- submenu macro, render all except first level items with class name 'item' -->
<metal:block define-macro="submenu">
  <a href="#" class="submenu">
		<img class="menuarrow"
					tal:condition="menuitem/icon"
					tal:attributes="src menuitem/icon" 
			/><tal:block content="menuitem/title" /></a>
  <metal:block use-macro="python:view.macros('menugroup')" />
</metal:block>

<metal:block define-macro="menugroup">
  <div tal:condition="menuitem/submenu" class="menugroup">
    <tal:block repeat="subitem menuitem/submenu">
			<tal:block define="menuitem subitem">
				<metal:block use-macro="python:view.macros('submenu')" />
			</tal:block>
		</tal:block>
	</div>
</metal:block>
