<html metal:use-macro="context/@@standard_macros/view"
    i18n:domain="zope">
<body>
<div metal:fill-slot="body">

  <h1 i18n:translate="">
    Registry Introspector: <a tal:attributes="href string:${context/@@absolute_url}/@@registry_browser.html">Browse</a>
  </h1>

<!-- <h2 i18n:translate=""-->
<!-- tal:define="utils view/getUtilities">-->
<!-- 	Registered Utilities:-->
<!-- 	<span tal:content="python:len(utils)">-->
<!-- 	</span>-->
<!-- </h2>-->

  <form action="request/URL"
     tal:attributes="action request/URL"
     method="post"
     >
     
    <div class="row">
      <div class="label" i18n:translate="">Search Registry</div>
      <div class="field">
        <input type="text" 
        	   name="searchQuery" 
        	   size="50"
        	   tal:attributes="value request/searchQuery | nothing"
        	   />
      </div>
      <div class="field">
      	Adapters
	      	<input type="checkbox" 
	      		   name="adapters"
	      		   tal:attributes="checked request/adapters | nothing"
	      		   />
      	Utilities
	      	<input type="checkbox" 
	      		   name="utilities"
	      		   tal:attributes="checked request/utilities | nothing"
	      		   />
      	Handlers
	      	<input type="checkbox" 
	      		   name="handlers"
	      		   tal:attributes="checked request/handlers | nothing"
	      		   />
      	Subscription Adapters
	      	<input type="checkbox" 
	      		   name="subscriptionAdapters"
	      		   tal:attributes="checked request/subscriptionAdapters | nothing"
	      		   />
      </div>
    </div>

    <div class="row">
      <div class="controls">
        <input type="submit" name="search" value="Search"/>
      </div>
    </div>
  </form>

	<div class="indent"
       tal:define="results view/searchRegistry">

    <ul class="attr-list" tal:condition="results">
      <li tal:repeat="result results">
        <span tal:content="structure result/@@registration.html" />
      </li>
    </ul>

  </div>

</div>
</body>
</html>
