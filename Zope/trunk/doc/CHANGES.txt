Principia Changes

  Principia 1.8.0

    To-Do before release

      - Test/Fix lever/product/release machinery.

      - TARGET search and destroy!

      - Turn on now-wrap on text areas!

      - DOCUMENTATION!

    Features Added

      - Added Draft objects.  Draft objects allow you to delagate authority 
        while retaining approval. Changes made to a draft object are
        (implicitly) saved in a session.  Session changes are saved
        when the draft is approved.

      - Added id, single, url, and assume_children attributes to the Tree tag.

      - Added support for expr shorthand, as in:

          <!--#if "x < y"-->

      - Revamped folder security:

         - No longer a separate "add objects" permission.

         - Must have "view management screens" to copy.

         - Must have "delete objects" to cut to delete.

         - Must be able to add an object of the type being pasted.

      - The security view now provides a link to manage property
        acquisition separately.  This makes it much easier to
        quickly enable or disable acquisition for all permissions.

      - New folderish control panel that separates database and
        product management into separate interfaces.

      - Through-the-web creation of products and factories.

      - Added "Find" tab to Folders

      - Added Rename function

      - Added support for multiple cut and paste

      - When adding image and file object's, the id may
        be omitted, in which case the upload file name is 
        used.

      - When adding documents, a new "Add and Edit" submit button may be used
        to immediately edit the document after it is added.

    Bugs Fixed

      - The folder objectItems method returned all items even when
        specific item types were given.

      - Domain-based security failed to authenticate users if an IP
        spec of less than 4 parts was used or if a corresponding host
        name could not be found via dns.



  Principia 1.7.0

    Features Added

    Bugs Fixed

      - The 1.6.0 installer generated an incorrect SOFTWARE_EXE line.

      - The top level UserFolder was incorrectly able to be cut and pasted.

      - The "Anonymous" was displayed in user add and edit screens
        even though it makes no sense to assign the "Anonymous" role
        to a user.

      - Packing failed on Windows.

      - Index files were not updated during packing, which could cause
        problems if a process exited abnormally after a pack.


  Principia 1.6.0

    Features Added

      - Management screen titles now provide navigation support.
        The names in the object's URL are now hypertext links
        to the corresponding folders.

      - Added support for '.' and '..' in URLs.

      - Added new 'method' form variable type.

        If you have a form variable with the name ':method' and the
        value 'x/y', then 'x/y' is added to the URL path.

	If you have a form variable named 'x/y:method', then
	'x/y' is added to the URL path.

    Bugs Fixed

      - Folders were unreachable until the next restart if they were
        cut then pasted.

      - URL variables and base HREFs were computed incorrectly when
        https URLs were used.

  Principia 1.5.0

    Features Added

      - Stop-gap export/import

        Eventually, there will be an interface for exporting and
        importing objects.  This has to be done carefully for security
        reasons.

        As a stop-gap measure, Folders now have the methods:

        manage_exportHack -- Export the folder, or one of it's items

           If an id is specified, then a sub-object is exported,
           otherwise the folder is exported.  The object is exported
           to the file: 'var/export.bbe' in the Principia installation
           directory. 

        manage_importHack -- Export an object into a folder

           An object is imported into the folder from the file:
	   'var/export.bbe' in the Principia installation
           directory. 

    Bugs Fixed

      - Document Titles were not being saved.

      - ImageFile objects (used by Principia developers)
        did not work correctly with new permission scheme.
 
      - Direct roles settings (made by Programmers without
        permissions) on Python methods did not work properly.

  Principia 1.4.0
  
    Bugs Fixed
  
      - Undo of transactions for which some records had been removed by
	a pack caused objects to become unusable.
  
      - RESPONSE.setCookie failed to set persistent cookies on IE4 browsers.
  
      - RESPONSE.appendCookie failed to append a cookie as documented.
  
      - RESPONSE.expireCookie expired cookies according to RFC2109, which
	failed with NS and IE browsers, as they dont follow the RFC.
  
    Features Added
  
      - Added integrated Apache web server preconfigured for Principia.
  
      - A database with default content is now created for new installations.
  
      - A number of permission names were added/rearranged to
	consolidate recent security enhancements.
  
      - Improvided expression (expr) support in DTML:
  
	- The special variable, '_', now provides namespace access in
	  addition to providing access to special "builtin" functions.
	  '_' and '_vars' are now bound to the same object and _vars
	  is deprecated.
  
	- Security-aware 'getattr' and 'hasattr' methods have been
	  added to the special '_' variable.
  
	- New 'render' method for '_' to render expressions in much the
	  same way that the 'name' tag attribute automatically renders
	  retrieved objects by calling sub-templates and functions.
  
  Principia 1.3.0
  
    Bugs Fixed
  
      - Custom roles could be added to UserFolders, where
	they would be effectively inaccessible.
  
    Features Added
  
      - Added domain-based user authentication
  
  
  Principia 1.2.0
  
    Bugs Fixed
  
      - Renaming an object when Cut/Pasting it did not actually
	change the id of the moved object.
  
    Features Added
  
      - Massive security changes
  
      - All documentation removed from distribution and available
	separately on the web site
  
      - Document editing now has controls for wider/narrower and
	taller/shorter
  
      - Improved handling of uninstalled products
  
  Principia 1.1.1
  
    Features Added
  
      - Added Cut/Paste, allowing objects to be moved in a
	single operation.
  
  
  Principia 1.1.0
  
    Features Added
  
      - Version information in Control Panel.
  
      - A major optimization of Document objects and other
	document templates.
  
      - A new DocumentTemplate 'with' tag.
  
      - Improved security for 'in' and 'tree'. Access to sequence and
	tree items are checked.  Each of these tags has a new
	skip_unautorized flag.  If this flag is used, then unauthoized
	items are skipped.  Otherwise, access to unauthorized items
	causes an Unauthorized exception to be raised.
  
      - Tree tags have a new branches_expr attribute that allows an
	expression to be used to locate sub-branches.
  
	For example, to display a tree that shows only folders, a tree
	tag like::
  
	  <!--#tree branches_expr="objectValues(['Folder'])"-->
  
	may be used.
  
      - Acquired acquiring objects can nor acquire from the object
	they were accessed in, in addition to the object they were
	acquired from.
  
      - Folders have a new permission, 'Access Contents Information',
	that exposes the methodsL 'objectIds', 'objectValues',
	'objectItems','hasProperty', 'propertyIds',
	'propertyValues','propertyItems' to DTML.  This permission uses
	the 'Shared' role by default.
  
      - Added anchors to the html generated by the
	tree tag to automatically jump to a newly
	expanded tree item
  
      - The software release no longer includes license files.
	Absent (or corrupted) license files are treated as 30-day
	evaluations.  This means that software may be upgraded
	by overlaying a release without worrying about overwriting
	license files.
  
    Bugs fixed
  
      - Attributes were sometimes obtained from incorrect objects in
	tree tags.
  
      - Authorization checks could sometimes cause incorrect objects to
	be acquired.
  
      - The decorations for objects in folder contents lists that show
	objects that were modified in sessions were sometimes incorrect
	after an undo.
  
      - When used from DTML scripts, Image and File constructors did
	not function correctly unless a REQUEST was passed, even though
	REQUEST was supposed to be optional.
  
      - Fixed has_role for superuser object
  
      - DTML var tags failes when rendering Python tuples.
  
      - Acquired properties were incorrectly unauthorized.
  
      - Editing of File's failed, due to a file missing from the release.
  
      - Editing folder permissions gave strange results (due to a bad
	internal alotment of operations to permissions).
  
      - The shared role was not effective for operations defined in 
	Python, like objectValues.
  
      - When Principia is used with a dedicated web server
	(so the top-level folder URL is "/" and SCRIPT_NAME is 
	empty), variables like URLx and BASEx were not computed
	correctly.
  
      - Pasting did not work in sessions in which no changes were
	made.
  
  
  Principia 1.0.10
  
    Bugs Fixed
  
      - Added has_role method to User objects
  
  
  Principia 1.0.9
  
    Bugs Fixed
  
      - Calling objectValues from DTML with arguments would fail
  
    Features Added
  
      - REMOTE_USER based authorization added
  
  
  Principia 1.0.8
  
    Bugs Fixed
  
      - The Paste feature was not accessible.
  
      - File objects were not accessible.
  
      - Cookies would fail for MSIE 3 browsers if no expiration
	was given for the cookie.
  
    Features Added
  
      - A new DTML function special variable, _getattr, for getting an
	attribute using a computed name. (This works like Python's
	getattr function, except that it enforces DTML security rules.)
  
      - A new namespace attribute of the DTML special variable,
	'_'.
  
	This can be used with the 'in' tag to introduce new
	variables in a section of DTML::
  
	 <!--#in expr="_.namespace(x=1, y=2)"-->
	   <!--#var x-->
	   <!--#var y-->
	 <!--#/in-->
  
  
  Principia 1.0.7
  
    Bugs Fixed
  
      - Installers for both unix and NT now require that the superuser
	name and password be supplied during the Principia installation.
  
      - Fixed a bug that could cause the __roles__ of a copied object
	to revert to defaults after pasting a copy of it.
  
      - Made permissions settings a bit more tolerant of adding operations to
	permissions.
  
      - Checked in some changes that should have been in 1.0.6.  The
	missing changes cause the total absense of session modification
	decorations in 1.0.6.  Now, a red diamond (work-zone) symbol is
	shown to the right of objects in contents lists for objects 
	modified in the current session, and a red diamond with a lock
	is shown next to objects modified in other sessions.
  
      - DTML tags that used the expr attribute in combination with flag
	attributes, as in '<!--#in expr="whatever" mapping-->' were
	parsed incorrectly.
  
      - In DTML expressions, expressions like: x.y[i], x.y[:i], and
	x.y[i:] were not compiled correctly.
  
      - The newline_to_br formatting attribute in var tags was broken.
  
      - Removed the Last-Modified feature for images and icons that was
	introduced in 1.0.6 - NS Communicator apparently has trouble
	handling 304 responses according to the HTTP spec ;(
  
    Features Added
  
      - The "View" view for Images now includes view tabs.
  
      - DTML expr expressions can now include newlines.
	Newlines and carriage returns are now converted to spaces.
  
	So::
  
	   <!--#var expr="1+
			  2"-->
  
	is equivalent to something like::
  
  
	   <!--#var expr="1+                        2"-->
  
      - Added 'set' method to REQUESTs, so that you can effectively set
	variables in DTML.  This is especially useful when invoking
	objects that acquire and get data from the REQUEST.
  
	For example::
  
	   <!--#var expr="REQUEST.set('foo',1)"-->
	   
	   <!--#var foo-->
  
  
  Principia 1.0.6
  
    Bugs Fixed
  
      - Objects, especially Documents, were gaining spurious 
	session locks.  Because these locks were spurious, they were not
	cleared when a session was saved or discarded.  These made
	editing of the objects impossible except in a session.
  
      - The contents of the 'doc' directory have been cleaned up
	dramatically.  The 'FAQ.txt' file has many more listings, the
	'INSTALL.txt' and 'PLATFORMS.txt' have been brought up to date,
	and the Principia Manager's Guide and DTML Manual are there in
	HTML, PDF, and PS formats.
  
    Features Added
  
      - Image and File objects, as well as system defined images
	such as object icons now return a Last-Modified http
	header. This makes it more likely that those images will
	be cached by web clients.
  
      - In addition to the red diamond that marks objects
	in contents lists that have changed in the current session, 
	we now mark objects that have changed in a session other than
	the current session (or in any session if not currently working
	in a session).  The new mark is a red diamond together with a
	closed lock.  The idea being converyed is that the object has
	been modified in a session and that it is locked and cannot be
	modified. 
  
      - Added internal hook to better coordinate transactions between 
	Principia and foreign transaction managers such as those 
	for RDBMS systems accessed by Aqueduct.
  
      - Two new tags are available in DTML:
  
	<!--#comment-->
	   This text is not included
	<!--#/comment-->
  
	<!--#raise StupidError-->
	    Text of error value, which may use other tags.
	<!--#/raise-->
  
  
  Principia 1.0.5
  
    Bugs Fixed
  
      - Rotor objects would give unexpected results when decoding
	licenses using unprintable keys on SGI machines.
  
  
  Principia 1.0.4
  
    Bugs Fixed
  
      - Certain important database storage structures were not properly
	saved.
  
  
  Principia 1.0.3
  
    New Features
  
      - Proxy roles for Documents were added.
  
  
  Principia 1.0.2
  
    Bugs Fixed
  
      - Dynamically-linked extension modules didn't work on Linux.
  
      - Manager roles weren't being set on a number of "add" methods.
  
      - The garbage-collection phase of pack failed.
  
      - Evaluation distributions lost the ability to create folders and
	standard objects after the process was restarted.
  
    New Features
  
      - Several general optimizations to accomodate large file uploads.
  
      - The size of File and Image objects is shown in their edit
	screens.
  
      - File and Image objects are more tolerant of missing content-type
	information during upload.
  
      - File and Image objects use a new lazy-load scheme which keeps
	their data out of memory until it is absolutely needed.
  
      - Products can provide permissions settings for Folder.  For
	example, a Product that provides Foo objects, may and probably
	should cause a "Add Foo Objects" permission setting to be
	defined for folders.
  
  
  Principia 1.0.1
  
    Bugs Fixed
  
      - Netscape publishing was broken.
  
      - expr="objectValues('Document')" caused an error.
  
      - The DTML 'in' tag variable, 'sequence-query', did not conform
	to the DTML documentation and caused extra (harmless)
	punctuation in URLs.
  
      - The DTML 'tree' tag didn't correctly fetch objects named in
	'header', 'footer', and 'leaves' tag attributes from the current
	branch of a hierarchy.
  
    New Features
  
      - Added size and modification-time display to file and image
	properties form.
