<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML lang="en">
<HEAD>
<TITLE>Undo Changes</TITLE>
</HEAD> 
<BODY BGCOLOR="#FFFFFF" LINK="#000099" VLINK="#555555" ALINK="#77003B">
<dtml-var manage_tabs>
<P>

<dtml-if undoable_transactions>

  <FORM ACTION="manage_undo_transactions" METHOD="POST">
  This application's transactional feature allows you to easily undo changes
  made to the application's settings or data. You can revert the application
  to a &quot;snapshot&quot; of it's state at a previous point in time.
  <P>
  Select one or more transactions below and then click on the &quot;Undo&quot;
  button to undo the transactions.  Note that even though a transaction
  is shown below, you will not be able to undo it if later transactions
  modified objects that were modified by the transaction.

  <table>
    <tr><td colspan=2 align=center><INPUT TYPE="SUBMIT" VALUE=" Undo ">
        </td></tr>
    <tr><td></td></tr>
    <dtml-if first_transaction>
       <tr><td colspan=2 align=center>
        <a href="manage_UndoForm?first_transaction:int=<dtml-var
	 expr="first_transaction*2-last_transaction"
	 >&last_transaction:int=<dtml-var first_transaction
         >&PrincipiaUndoBatchSize:int=<dtml-var PrincipiaUndoBatchSize
         >">
       Later Transactions</a>
       </td></tr>
    </dtml-if>
    <dtml-in undoable_transactions mapping>
      <tr>
      <td valign=top><input type=checkbox name="transaction_info:list"
	  value="<dtml-var id html_quote>"></td>
      <td valign=top>
	  <strong><dtml-var description html_quote></strong> by <strong>
          <dtml-if user_name>
	    <dtml-var user_name html_quote>
          <dtml-else>
            <em>Zope</em>
          </dtml-if>
	  </strong> on <dtml-var time fmt=Mon> <dtml-var time fmt=day> at
	  <dtml-var time fmt=Time>
      </td>
    </tr>
    </dtml-in>
    <dtml-if expr="_.len(undoable_transactions) == PrincipiaUndoBatchSize">
       <tr><td colspan=2 align=center>
       <a href="manage_UndoForm?first_transaction:int=<dtml-var
	 last_transaction>&last_transaction:int=<dtml-var
	 expr="last_transaction+PrincipiaUndoBatchSize"
         >&PrincipiaUndoBatchSize:int=<dtml-var PrincipiaUndoBatchSize
         >">
       Earlier Transactions</a>
       </td></tr>
    </dtml-if>
    <tr><td></td></tr>
    <tr><td colspan=2 align=center><INPUT TYPE="SUBMIT" VALUE=" Undo ">
        </td></tr>
  </table>
  </FORM>

<dtml-else>

  There are no transactions that can be undone.

</dtml-if>

</BODY>
</HTML>
