<schema prefix="Zope.Startup.datatypes" handler="root_handler">

  <!-- type definitions -->

  <import package="zLOG"/>


  <abstracttype name="server"/>

  <sectiontype name="http-server"
               implements="server">
     <multikey name="port" attribute="ports" datatype="inet-address"/>
     <key name="force-connection-close" datatype="boolean" default="off"/>
  </sectiontype>

  <sectiontype name="ftp-server"
               implements="server">
     <multikey name="port" attribute="ports" datatype="inet-address"/>
  </sectiontype>

  <sectiontype name="webdav-source-server"
               implements="server">
     <multikey name="port" attribute="ports" datatype="inet-address"/>
     <key name="force-connection-close" datatype="boolean" default="off"/>
  </sectiontype>

  <sectiontype name="pcgi-server"
               implements="server">
    <key name="file" datatype="existing-file"/>
  </sectiontype>

  <sectiontype name="fcgi-server"
               implements="server">
    <key name="port" datatype="inet-address"/>
    <key name="file" datatype="existing-dirpath"/>
  </sectiontype>

  <sectiontype name="monitor-server"
               implements="server">
     <multikey name="port" attribute="ports" datatype="inet-address"/>
  </sectiontype>

  <sectiontype name="icp-server"
               implements="server">
     <multikey name="port" attribute="ports" datatype="inet-address"/>
  </sectiontype>


  <sectiontype name="logger" datatype=".logger">
    <description>
      This "logger" type only applies to access and request ("trace")
      logging; event logging is handled by the zLOG package, which
      provides the loghandler type used here.
    </description>
    <key name="level" datatype="zLOG.datatypes.logging_level" default="info"/>
    <multisection type="loghandler" attribute="handlers" name="*"
                  required="yes"/>
  </sectiontype>

  <!-- the types that follow will be replaced by an import from the
       ZODB package -->
  <abstracttype name="storage"/>

  <sectiontype name="filestorage" datatype=".filestorage"
               implements="storage">
    <key name="path" required="yes"/>
    <key name="create" datatype="boolean"/>
    <key name="read-only" datatype="boolean"/>
    <key name="stop"/>
    <key name="quota" datatype="byte-size"/>
  </sectiontype>

  <sectiontype name="mappingstorage" datatype=".mappingstorage"
               implements="storage">
    <key name="name" default="Mapping Storage"/>
  </sectiontype>

  <sectiontype name="clientstorage" datatype=".clientstorage"
               implements="storage">
    <key name="addr" datatype="inet-address" required="yes"/>
    <key name="storage" default="1"/>
    <key name="cache-size" datatype="byte-size" default="20MB"/>
    <key name="name" default=""/>
    <key name="client"/>
    <key name="debug" datatype="boolean"/>
    <key name="var" datatype="existing-directory"/>
    <key name="min-disconnect-poll" datatype="time-interval" default="5S"/>
    <key name="max-disconnect-poll" datatype="time-interval" default="300S"/>
    <key name="wait" datatype="boolean" default="on"/>
    <key name="read-only" datatype="boolean" default="off"/>
    <key name="read-only-fallback" datatype="boolean" default="off"/>
  </sectiontype>


  <sectiontype name="zodb" datatype=".database">
    <multisection type="storage" name="*" attribute="storages"/>
    <multikey name="mount-point" attribute="mount_points"
              datatype=".mount_point"/>
    <key name="db-class" default="ZODB.DB"/>
    <key name="cache-size" datatype="integer" default="5000"/>
    <key name="pool-size" datatype="integer" default="7"/>
    <key name="cache-deactivate-after" datatype="time-interval" default="60S"/>
    <key name="version-pool-size" datatype="integer" default="3"/>
    <key name="version-cache-size" datatype="integer" default="100"/>
    <key name="version-cache-deactivate-after" datatype="time-interval"
         default="10S"/>
  </sectiontype>

  <!-- end of type definitions -->

  <!-- schema begins  -->

  <key name="instance-home" datatype="existing-directory"
       required="yes" handler="instance_home"/>

  <key name="software-home" datatype="existing-directory"
       required="yes" handler="software_home"/>

  <key name="zope-home" datatype="existing-directory"
       handler="zope_home"/>

  <key name="client-home" datatype="existing-directory"
       handler="client_home"/>

  <key name="pid-filename" datatype="existing-dirpath"/>

  <key name="lock-filename" datatype="existing-dirpath"/>

  <key name="debug-mode" datatype="boolean" default="on"
       handler="debug_mode"/>

  <key name="effective-user"/>

  <key name="enable-product-installation" datatype="boolean" default="on"
       handler="enable_product_installation"/>

  <key name="locale" datatype="locale" handler="locale"/>

  <key name="zserver-threads" datatype="integer" default="4"/>

  <key name="python-check-interval" datatype="integer" default="500">
    <description>
      Value passed to Python's sys.setcheckinterval() function.  The
      higher this is, the less frequently the Python interpreter
      checks for keyboard interrupts.  Setting this to higher values
      also reduces the frequency of potential thread switches, which
      can improve the performance of a busy server.
    </description>
  </key>

  <key name="use-daemon-process" datatype=".use_daemon_process" default="on"
       handler="use_daemon_process"/>

  <key name="zserver-read-only-mode" datatype="boolean" default="off"
       handler="zserver_read_only_mode"/>

  <key name="structured-text-header-level" datatype="integer" default="3"
       handler="structured_text_header_level"/>

  <key name="maximum-security-manager-stack-size" datatype="integer"
       default="100" handler="maximum_security_manager_stack_size"/>

  <key name="publisher-profile-file" handler="publisher_profile_file"/>

  <key name="webdav-source-user-agents"/>

  <multikey name="cgi-environment-variable" datatype="key-value"
            attribute="cgi_environment_variables"/>

  <key name="dns-ip-address" datatype="ipaddr-or-hostname"/>

  <key name="ip-address" datatype="ipaddr-or-hostname"/>

  <key name="http-realm" default="Zope" handler="http_realm"/>

  <key name="automatically-quote-dtml-request-data" datatype="boolean"
       default="on" handler="automatically_quote_dtml_request_data"/>

  <key name="security-policy-implementation"
       datatype=".security_policy_implementation"
       default="C" handler="security_policy_implementation"/>

  <key name="skip-authentication-checking" datatype="boolean"
       default="off" handler="skip_authentication_checking"/>

  <key name="skip-ownership-checking" datatype="boolean"
       default="off" handler="skip_ownership_checking"/>

  <key name="maximum-number-of-session-objects" datatype="integer"
       default="1000" handler="maximum_number_of_session_objects"/>

  <key name="session-add-notify-script-path"
       handler="session_add_notify_script_path"/>

  <key name="session-delete-notify-script-path"
       handler="session_add_notify_script_path"/>

  <key name="session-timeout-minutes" datatype="integer"
       default="20" handler="session_timeout_minutes"/>

  <key name="suppress-all-access-rules" datatype="boolean"
       default="off" handler="suppress_all_access_rules"/>

  <key name="suppress-all-site-roots" datatype="boolean"
       default="off" handler="suppress_all_site_roots"/>

  <key name="database-quota-size" datatype="byte-size"
       handler="database_quota_size"/>

  <key name="read-only-database" datatype="boolean"
       handler="read_only_database"/>

  <key name="zeo-client-name"
       handler="zeo_client_name"/>

  <section type="eventlog" name="*" attribute="eventlog">
    <description>
      Describes the logging performed by zLOG.LOG() calls.
    </description>
  </section>

  <section type="logger" name="access"/>
 
  <section type="logger" name="trace"/>

  <multisection type="server" name="*" attribute="servers"/>

  <multisection type="zodb" name="*" attribute="databases"/>

  <!-- schema ends  -->

</schema>
